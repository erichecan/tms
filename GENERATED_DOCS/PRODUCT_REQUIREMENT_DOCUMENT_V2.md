### **产品需求文档 (PRD): 运输管理系统 (TMS) v1.0**

**1. 文档概述**

*   **1.1. 项目背景:**
    为了应对日益复杂的物流需求, 提升运输效率, 降低沟通成本, 并为财务结算提供准确数据, 我们需要构建一个现代化的运输管理系统 (TMS). 该系统旨在将从询价, 运单创建, 调度执行到最终结算的整个运输流程数字化, 为客户, 运营人员, 司机和管理层提供一个统一, 高效的协作平台.

*   **1.2. 产品目标:**
    *   **v1.0 核心目标:** 打造一个以 **"运单"** 为中心的核心业务流产品. 实现运单的创建, 调度, 执行, 签收和基础结算功能, 确保主流程的顺畅与数据的统一.
    *   **长期目标:** 建立一个可扩展的平台, 未来能接入更复杂的定价模型, 路线优化, 仓储管理, 客户关系管理 (CRM) 和商业智能 (BI) 分析等高级功能.

**2. 用户画像 (User Personas)**

*   **2.1. 客户 (Customer):**
    *   **需求:** 希望能在线自主下单, 追踪货物实时状态, 查看历史订单和费用.
    *   **痛点:** 依赖电话, 微信反复沟通, 信息不透明, 无法实时了解货物位置.

*   **2.2. 销售/运营 (Sales/Operations):**
    *   **需求:** 快速为客户创建/补录运单, 提供报价, 解答客户关于订单状态的疑问.
    *   **痛点:** 信息分散在不同工具 (电话记录, Excel, 微信), 手动处理易出错, 工作效率低.

*   **2.3. 调度员 (Dispatcher):**
    *   **需求:** 集中查看所有待处理运单, 高效地指派最合适的车辆和司机, 监控运输过程, 处理异常.
    *   **痛点:** "人肉"调度, 难以平衡成本和时效, 无法有效管理在途车辆和司机.

*   **2.4. 司机 (Driver):**
    *   **需求:** 通过手机接收任务, 更新运输节点 (提货, 到达, 签收), 方便地上传签收凭证 (POD).
    *   **痛点:** 任务交接不清, 需频繁电话汇报位置和状态, 纸质单据易丢失.

*   **2.5. 财务人员 (Finance):**
    *   **需求:** 基于系统中确认的运单和凭证, 进行客户对账, 生成账单, 以及与司机的费用结算.
    *   **痛点:** 信息核对困难, 结算周期长, 依赖手工对账, 数据易出错.

**3. 功能需求 (Functional Requirements) - v1.0**

#### **模块一: 运单与报价管理 (Order & Quote Management)**

*   **3.1.1. 运单创建:**
    *   **场景1 (内部创建/补录):** 允许销售/运营人员在后台创建运单. 字段应包括但不限于:
        *   客户信息 (可选/关联已有客户)
        *   发货地, 收货地
        *   货物信息 (名称, 重量, 体积, 件数)
        *   期望提货/送达时间
        *   运输费用 (可为估算价或最终价)
        *   备注 (例如: 客户通过电话确认)
    *   **场景2 (客户自主下单):** 提供客户门户或接口, 允许认证后的客户自行填写并提交运单.
    *   **运单状态:** `草稿`, `待确认`, `已确认/待调度`, `已取消`.

*   **3.1.2. 报价功能:**
    *   允许销售/运营人员创建一个 "报价单", 其字段与运单类似但无强制性.
    *   报价单可一键转为正式运单, 减少重复录入.

#### **模块二: 调度与执行 (Dispatch & Execution)**

*   **3.2.1. 调度工作台:**
    *   调度员可以看到所有 `已确认/待调度` 状态的运单列表.
    *   提供筛选和排序功能 (例如: 按期望提货时间, 路线区域).

*   **3.2.2. 任务指派:**
    *   调度员选择一个运单, 然后从可用司机/车辆列表中选择并指派.
    *   指派后, 运单状态变为 `已调度/待提货`.
    *   系统应向对应司机的移动端发送新任务通知.

*   **3.2.3. 运输过程追踪:**
    *   司机可通过移动端 (初期可以是简单的Web页面/小程序) 更新关键节点:
        *   `已接受任务`
        *   `已提货`
        *   `在途`
        *   `已送达`
    *   每次更新, 运单状态随之改变, 并记录时间戳.
    *   客户和内部人员可在运单详情页看到最新状态.

#### **模块三: 签收与完结 (POD & Completion)**

*   **3.3.1. POD上传:**
    *   司机在 `已送达` 后, 可通过移动端上传签收凭证的照片 (Proof of Delivery).
    *   运单状态变为 `已签收/待审核`.

*   **3.3.2. 完结确认:**
    *   运营或财务人员审核POD, 确认无误后, 将运单状态更新为 `已完结`. 这是启动结算的信号.

#### **模块四: 财务结算 (Financial Settlement)**

*   **3.4.1. 客户对账:**
    *   财务人员可以筛选特定时间段内, 某个客户所有 `已完结` 的运单.
    *   系统根据这些运单自动生成对账单, 包含运单号, 路线, 费用等.

*   **3.4.2. 司机报酬结算:**
    *   财务人员可以筛选特定时间段内, 某个司机所有 `已完结` 的运单.
    *   系统根据预设的计费规则 (v1.0可简化为按单结算) 计算司机报酬.

#### **模块五: 基础信息管理 (Master Data Management)**

*   **3.5.1. 客户管理:** 维护客户基本信息.
*   **3.5.2. 司机与车辆管理:** 维护司机联系方式, 所属车辆信息等.

**4. 非功能性需求 (Non-Functional Requirements)**

*   **4.1. 可扩展性 (Scalability):**
    *   系统架构应采用微服务或模块化设计, 便于未来独立升级或增加新功能 (如定价引擎, 路线规划).
    *   数据库设计应具有良好的扩展性, 预留未来可能增加的字段和关联.

*   **4.2. 易用性 (Usability):**
    *   针对不同角色设计简洁直观的界面. 特别是司机使用的移动端, 操作必须简单明了.

*   **4.3. 可靠性 (Reliability):**
    *   系统应保证高可用性, 核心业务流程不能中断.

*   **4.4. 安全性 (Security):**
    *   实施基于角色的访问控制 (RBAC),确保不同用户只能访问其权限范围内的数据.

**5. 未来版本规划 (Future Roadmap)**

*   **v1.1 (功能增强):**
    *   **联程/多点运输:** 支持一个运单包含多个提货点或卸货点.
    *   **司机任务合并:** 允许调度员为已在途的司机指派新的顺路任务.
    *   **实时GPS追踪:** 集成GPS硬件或手机App SDK, 实现真正的实时位置追踪.

*   **v2.0 (平台化):**
    *   **智能定价引擎:** 根据路线, 货物类型, 市场行情等因素自动报价.
    *   **路线优化:** 为多任务的司机提供最优路径规划.
    *   **高级报表与BI:** 提供多维度的数据分析报表, 如客户价值分析, 路线成本分析等.
    *   **开放API:** 允许大客户或第三方系统通过API对接, 实现运单自动同步.
