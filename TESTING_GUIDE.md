# TMSç³»ç»Ÿæµ‹è¯•æŒ‡å—

**åˆ›å»ºæ—¶é—´**: 2025-10-10  
**æœ€åæ›´æ–°**: 2025-10-10 13:50:00

---

## ğŸ“š ç›®å½•

1. [æµ‹è¯•æ¦‚è¿°](#æµ‹è¯•æ¦‚è¿°)
2. [æµ‹è¯•å¥—ä»¶](#æµ‹è¯•å¥—ä»¶)
3. [è¿è¡Œæµ‹è¯•](#è¿è¡Œæµ‹è¯•)
4. [æµ‹è¯•ç»“æœ](#æµ‹è¯•ç»“æœ)
5. [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

---

## æµ‹è¯•æ¦‚è¿°

TMSç³»ç»Ÿä½¿ç”¨**Playwright**è¿›è¡Œç«¯åˆ°ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œè¦†ç›–ä»¥ä¸‹èŒƒå›´ï¼š

- âœ… é¡µé¢å¯è®¿é—®æ€§æµ‹è¯•
- âœ… è®¤è¯å’Œæˆæƒæµ‹è¯•
- âœ… ä¸šåŠ¡æµç¨‹æµ‹è¯•
- âœ… APIé›†æˆæµ‹è¯•
- âœ… æ€§èƒ½æµ‹è¯•

---

## æµ‹è¯•å¥—ä»¶

### 1. é¡µé¢å¯è®¿é—®æ€§æµ‹è¯•
**æ–‡ä»¶**: `tests/e2e/pages-accessibility-test.spec.ts`  
**æµ‹è¯•æ•°**: 11ä¸ª  
**ç›®çš„**: éªŒè¯æ‰€æœ‰ä¸»è¦é¡µé¢æ˜¯å¦å¯ä»¥æ­£å¸¸åŠ è½½

**æµ‹è¯•é¡¹**:
- ä¸»é¡µè®¿é—®
- è¿å•ç®¡ç†é¡µé¢
- åˆ›å»ºè¿å•é¡µé¢
- è½¦é˜Ÿç®¡ç†é¡µé¢
- è´¢åŠ¡ç»“ç®—é¡µé¢
- è§„åˆ™ç®¡ç†é¡µé¢
- æ§åˆ¶å°é”™è¯¯æ£€æŸ¥
- é¡µé¢å“åº”æ—¶é—´
- APIå¥åº·æ£€æŸ¥
- å‰ç«¯èµ„æºåŠ è½½
- è·¯ç”±å¯è®¿é—®æ€§

**è¿è¡Œå‘½ä»¤**:
```bash
npx playwright test tests/e2e/pages-accessibility-test.spec.ts
```

---

### 2. è®¤è¯åŠŸèƒ½æµ‹è¯•
**æ–‡ä»¶**: `tests/e2e/authenticated-flow-test.spec.ts`  
**æµ‹è¯•æ•°**: 13ä¸ª  
**ç›®çš„**: éªŒè¯éœ€è¦è®¤è¯çš„åŠŸèƒ½æ˜¯å¦æ­£å¸¸å·¥ä½œ

**æµ‹è¯•é¡¹**:
- è®¤è¯çŠ¶æ€éªŒè¯
- è¿å•åˆ—è¡¨æ•°æ®åŠ è½½
- åˆ›å»ºè¿å•è¡¨å•äº¤äº’
- è¿å•è¯¦æƒ…Modal
- BOLå•æ®æ ‡ç­¾é¡µ
- ç¼–è¾‘è¿å•åŠŸèƒ½
- è½¦é˜Ÿç®¡ç†åœ°å›¾
- æ™ºèƒ½è°ƒåº¦UI
- è´¢åŠ¡ç»“ç®—é¡µé¢
- å¸æœºè–ªé…¬é¡µé¢
- å®Œæ•´è¿å•æŸ¥çœ‹æµç¨‹
- Google Mapsåˆå§‹åŒ–
- è®¡è´¹å¼•æ“å“åº”

**è¿è¡Œå‘½ä»¤**:
```bash
npx playwright test tests/e2e/authenticated-flow-test.spec.ts
```

---

### 3. å®Œæ•´ç³»ç»Ÿæµ‹è¯•
**æ–‡ä»¶**: `tests/e2e/complete-system-test.spec.ts`  
**æµ‹è¯•æ•°**: 17ä¸ª  
**ç›®çš„**: å®Œæ•´çš„ç«¯åˆ°ç«¯æµ‹è¯•ï¼ˆéœ€è¦ç™»å½•ï¼‰

**æ³¨æ„**: æ­¤æµ‹è¯•å¥—ä»¶éœ€è¦é…ç½®ç™»å½•æµç¨‹æˆ–ä½¿ç”¨æµ‹è¯•token

---

## è¿è¡Œæµ‹è¯•

### å‰ç½®æ¡ä»¶

1. **å¯åŠ¨åç«¯æœåŠ¡**:
```bash
cd apps/backend
npm run dev
```

2. **å¯åŠ¨å‰ç«¯æœåŠ¡**:
```bash
cd apps/frontend
npm run dev
```

3. **ç¡®ä¿æ•°æ®åº“è¿è¡Œ**:
```bash
# PostgreSQLåº”è¯¥åœ¨localhost:5432è¿è¡Œ
```

---

### è¿è¡Œæ‰€æœ‰æµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npx playwright test

# è¿è¡Œç‰¹å®šæµ‹è¯•æ–‡ä»¶
npx playwright test tests/e2e/pages-accessibility-test.spec.ts

# ä»¥UIæ¨¡å¼è¿è¡Œï¼ˆå¯è§†åŒ–ï¼‰
npx playwright test --ui

# ä»¥è°ƒè¯•æ¨¡å¼è¿è¡Œ
npx playwright test --debug

# è¿è¡Œç‰¹å®šæµ‹è¯•
npx playwright test -g "BOLå•æ®"
```

---

### æŸ¥çœ‹æµ‹è¯•æŠ¥å‘Š

```bash
# ç”Ÿæˆå¹¶æ‰“å¼€HTMLæŠ¥å‘Š
npx playwright show-report

# æŠ¥å‘Šä¼šåœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ï¼Œä½äºï¼š
# http://localhost:9323
```

---

## æµ‹è¯•ç»“æœ

### æœ€æ–°æµ‹è¯•ç»“æœ (2025-10-10)

**æ€»æµ‹è¯•æ•°**: 24  
**é€šè¿‡**: 24/24 (100%)  
**å¤±è´¥**: 0  
**æ‰§è¡Œæ—¶é—´**: 16.7ç§’

### è¯¦ç»†ç»“æœ

#### âœ… é¡µé¢å¯è®¿é—®æ€§æµ‹è¯• (11/11é€šè¿‡)
- å¹³å‡å“åº”æ—¶é—´: 309ms
- æ‰€æœ‰é¡µé¢çŠ¶æ€ç : 200
- æ— èµ„æºåŠ è½½é”™è¯¯
- æ— æ§åˆ¶å°é”™è¯¯

#### âœ… è®¤è¯åŠŸèƒ½æµ‹è¯• (13/13é€šè¿‡)
- Tokenè®¤è¯: æ­£å¸¸
- APIè°ƒç”¨: æ­£å¸¸
- Google Maps: v3.62.9cå·²åŠ è½½
- BOLå•æ®: æ­£å¸¸æ˜¾ç¤º
- ç¼–è¾‘åŠŸèƒ½: æ­£å¸¸å·¥ä½œ

---

## æµ‹è¯•è¦†ç›–çš„åŠŸèƒ½

### âœ… å·²æµ‹è¯•åŠŸèƒ½

1. **è¿å•ç®¡ç†**
   - âœ… è¿å•åˆ—è¡¨æ˜¾ç¤º
   - âœ… è¿å•è¯¦æƒ…æŸ¥çœ‹
   - âœ… è¿å•ç¼–è¾‘åŠŸèƒ½
   - âœ… BOLå•æ®æ˜¾ç¤º
   - âœ… è¿å•åˆ›å»ºè¡¨å•

2. **Google Mapsé›†æˆ**
   - âœ… Maps APIåŠ è½½ï¼ˆv3.62.9cï¼‰
   - âœ… åœ°å€è¾“å…¥æ¡†
   - âœ… åœ°å›¾å®¹å™¨

3. **è®¡è´¹å¼•æ“**
   - âœ… APIç«¯ç‚¹å¥åº·
   - âœ… è¡¨å•äº¤äº’

4. **æ™ºèƒ½è°ƒåº¦**
   - âœ… UIæŒ‰é’®æ˜¾ç¤º
   - âœ… è¿å•é€‰æ‹©åŠŸèƒ½

5. **è´¢åŠ¡ç®¡ç†**
   - âœ… è´¢åŠ¡ç»“ç®—é¡µé¢
   - âœ… å¸æœºè–ªé…¬é¡µé¢

6. **BOLæ‰“å°ç³»ç»Ÿ**
   - âœ… BOLæ–‡æ¡£æ˜¾ç¤º
   - âœ… æ ‡ç­¾é¡µåˆ‡æ¢
   - âœ… æ‰“å°æŒ‰é’®

---

## å¸¸è§é—®é¢˜

### Q1: æµ‹è¯•è¶…æ—¶æ€ä¹ˆåŠï¼Ÿ

**A**: å¢åŠ timeouté…ç½®ï¼š
```typescript
test('æµ‹è¯•åç§°', async ({ page }) => {
  await page.goto(url, { timeout: 30000 }); // 30ç§’è¶…æ—¶
});
```

### Q2: å¦‚ä½•è·³è¿‡æŸä¸ªæµ‹è¯•ï¼Ÿ

**A**: ä½¿ç”¨`test.skip`:
```typescript
test.skip('æš‚æ—¶è·³è¿‡çš„æµ‹è¯•', async ({ page }) => {
  // ...
});
```

### Q3: å¦‚ä½•åªè¿è¡Œä¸€ä¸ªæµ‹è¯•ï¼Ÿ

**A**: ä½¿ç”¨`test.only`:
```typescript
test.only('åªè¿è¡Œè¿™ä¸ªæµ‹è¯•', async ({ page }) => {
  // ...
});
```

### Q4: æµ‹è¯•tokenè¿‡æœŸæ€ä¹ˆåŠï¼Ÿ

**A**: è¿è¡Œtokenç”Ÿæˆè„šæœ¬ï¼š
```bash
cd apps/backend
node generate-test-token.js
```

ç„¶åæ›´æ–°æµ‹è¯•æ–‡ä»¶ä¸­çš„`TEST_TOKEN`å¸¸é‡ã€‚

### Q5: å¦‚ä½•ç”Ÿæˆæµ‹è¯•æ•°æ®ï¼Ÿ

**A**: è¿è¡Œæµ‹è¯•æ•°æ®ç”Ÿæˆè„šæœ¬ï¼š
```bash
cd apps/backend
npx tsx src/database/generateTestData.ts
```

---

## æµ‹è¯•æœ€ä½³å®è·µ

### 1. ä½¿ç”¨æœ‰æ„ä¹‰çš„æµ‹è¯•åç§°
```typescript
// âŒ ä¸å¥½
test('test1', async ({ page }) => { ... });

// âœ… å¥½
test('è¿å•è¯¦æƒ…Modalåº”è¯¥æ­£ç¡®æ˜¾ç¤ºBOLå•æ®', async ({ page }) => { ... });
```

### 2. æ·»åŠ é€‚å½“çš„ç­‰å¾…
```typescript
// ç­‰å¾…é¡µé¢åŠ è½½å®Œæˆ
await page.waitForLoadState('networkidle');

// ç­‰å¾…ç‰¹å®šå…ƒç´ 
await page.waitForSelector('.ant-modal');

// ç­‰å¾…APIå“åº”
await page.waitForResponse(response => response.url().includes('/api/'));
```

### 3. å¤„ç†å¼‚æ­¥æ“ä½œ
```typescript
// ä½¿ç”¨try-catchå¤„ç†å¯èƒ½çš„é”™è¯¯
try {
  await page.click('button');
} catch (error) {
  console.log('æŒ‰é’®æœªæ‰¾åˆ°ï¼Œè·³è¿‡æ­¤æ­¥éª¤');
}
```

### 4. ä½¿ç”¨æ§åˆ¶å°æ—¥å¿—è¾…åŠ©è°ƒè¯•
```typescript
console.log('âœ… æµ‹è¯•é€šè¿‡');
console.log('âš ï¸  è­¦å‘Šä¿¡æ¯');
console.log('âŒ é”™è¯¯ä¿¡æ¯');
console.log('ğŸ“Š ç»Ÿè®¡æ•°æ®:', count);
```

---

## æŒç»­é›†æˆï¼ˆCIï¼‰

### GitHub Actionsé…ç½®ç¤ºä¾‹

```yaml
name: E2E Tests

on: [push, pull_request]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '18'
      
      - name: Install dependencies
        run: npm ci
      
      - name: Install Playwright
        run: npx playwright install --with-deps
      
      - name: Run tests
        run: npx playwright test
      
      - name: Upload test results
        if: always()
        uses: actions/upload-artifact@v3
        with:
          name: playwright-report
          path: playwright-report/
```

---

## æµ‹è¯•ç»´æŠ¤

### å®šæœŸæ›´æ–°
- æ¯æ¬¡æ·»åŠ æ–°åŠŸèƒ½æ—¶ï¼Œæ·»åŠ ç›¸åº”çš„æµ‹è¯•
- æ¯å‘¨è¿è¡Œä¸€æ¬¡å®Œæ•´æµ‹è¯•å¥—ä»¶
- æ¯æ¬¡éƒ¨ç½²å‰è¿è¡Œæµ‹è¯•éªŒè¯

### æµ‹è¯•æ•°æ®ç»´æŠ¤
- å®šæœŸæ¸…ç†æµ‹è¯•æ•°æ®
- ä¿æŒæµ‹è¯•æ•°æ®çš„çœŸå®æ€§
- é¿å…æµ‹è¯•æ•°æ®æ±¡æŸ“ç”Ÿäº§æ•°æ®

---

## ğŸ“ æ”¯æŒ

å¦‚æœ‰æµ‹è¯•ç›¸å…³é—®é¢˜ï¼Œè¯·ï¼š
1. æŸ¥çœ‹æµ‹è¯•æŠ¥å‘Š: `npx playwright show-report`
2. æŸ¥çœ‹å¤±è´¥æˆªå›¾å’Œè§†é¢‘
3. æ£€æŸ¥æ§åˆ¶å°æ—¥å¿—
4. è”ç³»å¼€å‘å›¢é˜Ÿ

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0  
**ç”Ÿæˆæ—¶é—´**: 2025-10-10 13:50:00

