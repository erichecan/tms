# Google Cloud Platform 环境变量配置示例
# 2025-01-27 10:40:00

# =============================================================================
# 数据库配置
# =============================================================================

# Cloud SQL 连接字符串（使用 Cloud SQL Proxy）
# 格式: postgres://用户名:密码@/数据库名?host=/cloudsql/项目ID:区域:实例名
DATABASE_URL=postgres://postgres:YOUR_SECURE_PASSWORD@/tms_db?host=/cloudsql/PROJECT_ID:asia-east1:tms-postgres

# 或者使用外网连接（开发/测试环境）
# DATABASE_URL=postgres://postgres:YOUR_SECURE_PASSWORD@EXTERNAL_IP:5432/tms_db?sslmode=require

# =============================================================================
# 认证配置
# =============================================================================

# JWT 密钥（32 位随机字符串）
JWT_SECRET=your-32-character-jwt-secret-key-here

# JWT 过期时间（秒）
JWT_EXPIRES_IN=86400

# =============================================================================
# Google Maps API 配置
# =============================================================================

# Google Maps API 密钥
GOOGLE_MAPS_API_KEY=AIzaSyBrJZAt61Nrlhe-MRY8rmE0D0i9x-0OS28

# =============================================================================
# 服务器配置
# =============================================================================

# 运行环境
NODE_ENV=production

# 服务器端口（Cloud Run 会自动设置）
PORT=8080

# CORS 允许的源（前端域名）
CORS_ORIGIN=https://YOUR_FRONTEND_DOMAIN.com

# =============================================================================
# 前端环境变量（Vite）
# =============================================================================

# API 基础 URL
VITE_API_BASE_URL=https://tms-backend-HASH-uc.a.run.app

# Google Maps API 密钥（前端使用）
VITE_GOOGLE_MAPS_API_KEY=AIzaSyBrJZAt61Nrlhe-MRY8rmE0D0i9x-0OS28

# =============================================================================
# Google Cloud 配置
# =============================================================================

# Google Cloud 项目 ID
GOOGLE_CLOUD_PROJECT=your-project-id

# 部署区域
GOOGLE_CLOUD_REGION=asia-east1

# Cloud SQL 实例名称
CLOUD_SQL_INSTANCE=tms-postgres

# =============================================================================
# 日志配置
# =============================================================================

# 日志级别
LOG_LEVEL=info

# 是否启用结构化日志
JSON_LOGS=true

# =============================================================================
# 安全配置
# =============================================================================

# 密码加密轮数
BCRYPT_ROUNDS=12

# 会话超时时间（毫秒）
SESSION_TIMEOUT=3600000

# =============================================================================
# 功能开关
# =============================================================================

# 是否启用 API 文档
ENABLE_SWAGGER=false

# 是否启用健康检查端点
ENABLE_HEALTH_CHECK=true

# 是否启用指标收集
ENABLE_METRICS=true

# =============================================================================
# 开发环境配置（可选）
# =============================================================================

# 开发环境数据库 URL（如果使用本地数据库）
# DEV_DATABASE_URL=postgres://postgres:password@localhost:5432/tms_dev

# 开发环境 CORS 配置
# DEV_CORS_ORIGIN=http://localhost:3000

# =============================================================================
# 部署说明
# =============================================================================

# 1. 复制此文件为 .env.gcp
# 2. 替换所有 YOUR_* 占位符为实际值
# 3. 将敏感信息存储到 Google Secret Manager
# 4. 在 Cloud Run 中引用 Secret Manager 密钥
# 5. 更新 CORS_ORIGIN 为实际的前端域名
