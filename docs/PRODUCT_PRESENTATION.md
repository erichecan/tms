# TMS 智能物流运营平台 - 产品说明文档

**文档版本**: V1.0  
**创建时间**: 2025-11-24  
**适用对象**: 客户演示与讲解  
**系统版本**: TMS SaaS Platform v3.0-PC

---

## 📋 目录

1. [系统概述](#系统概述)
2. [系统目标](#系统目标)
3. [核心功能模块](#核心功能模块)
4. [已实现功能清单](#已实现功能清单)
5. [产品主流程](#产品主流程)
6. [技术架构亮点](#技术架构亮点)
7. [未来功能规划](#未来功能规划)
8. [演示场景建议](#演示场景建议)

---

## 1. 系统概述

### 1.1 产品定位

**TMS 智能物流运营平台**是一个基于规则引擎的**SaaS多租户物流管理系统**，专为中小型物流企业设计，提供从运单创建、智能调度、实时跟踪到财务结算的**全流程数字化解决方案**。

### 1.2 核心价值

- ✅ **降本增效**：智能调度算法优化车辆分配，降低空驶率，提升运营效率
- ✅ **透明管理**：实时跟踪运单状态，全程可视化，提升客户满意度
- ✅ **自动化结算**：运单完成后自动生成应收应付，减少人工对账工作量
- ✅ **灵活计费**：基于规则引擎的动态计费系统，支持复杂计费场景
- ✅ **多租户架构**：一套系统支持多个物流公司独立使用，数据完全隔离

---

## 2. 系统目标

### 2.1 核心目标

1. **实现运单全生命周期管理**
   - 从创建到完成的完整流程跟踪
   - 支持多种创建方式（手工录入、批量导入、API对接）
   - 实时状态更新和异常处理

2. **智能调度优化**
   - 自动匹配最优司机和车辆
   - 路线优化和联程运输
   - 降低运输成本，提升效率

3. **财务自动化**
   - 运单完成后自动生成应收应付记录
   - 支持客户和司机结算单生成
   - 财务数据实时统计和分析

4. **提升用户体验**
   - PC端和移动端双端支持
   - 客户自助下单和查询
   - 司机移动端接单和状态更新

### 2.2 长期愿景

- 接入更复杂的定价模型和路线优化算法
- 集成仓储管理（WMS）和客户关系管理（CRM）
- 提供商业智能（BI）分析和数据可视化
- 支持多语言和多币种国际化

---

## 3. 核心功能模块

### 3.1 运单管理模块 🚛

**功能描述**：完整的运单生命周期管理

**核心能力**：
- ✅ 运单创建（支持客户选择、地址自动填充、货物信息录入）
- ✅ 运单查询和筛选（按状态、客户、时间等）
- ✅ 运单详情查看（完整信息、时间线、POD凭证）
- ✅ 运单状态流转（创建 → 分配 → 提货 → 在途 → 送达 → 完成）
- ✅ 批量导入运单（Excel模板导入）
- ✅ 运单打印和PDF导出（BOL运单单）

**适用角色**：运营人员、调度员、管理员

---

### 3.2 客户管理模块 👥

**功能描述**：客户信息管理和快速创建

**核心能力**：
- ✅ 客户档案管理（基本信息、联系方式、默认地址）
- ✅ 客户等级管理（标准客户、VIP客户、高级客户）
- ✅ 客户历史运单查询
- ✅ 客户财务记录查看
- ✅ 快速创建运单（从客户详情页）
- ✅ 客户搜索、筛选和排序

**适用角色**：销售、运营、管理员

---

### 3.3 司机管理模块 🚗

**功能描述**：司机档案和绩效跟踪

**核心能力**：
- ✅ 司机基本信息管理（姓名、电话、驾照号）
- ✅ 司机状态管理（空闲、忙碌、休假、停用）
- ✅ 司机绩效跟踪（评分、完成率、准时率、客户满意度）
- ✅ 司机实时位置跟踪
- ✅ 司机历史运单查看
- ✅ 司机薪酬结算

**适用角色**：调度员、管理员

---

### 3.4 车辆管理模块 🚛

**功能描述**：车辆档案和状态管理

**核心能力**：
- ✅ 车辆基本信息（车牌号、类型、载重、尺寸）
- ✅ 车辆状态管理（可用、使用中、维护中、停用）
- ✅ 车辆实时位置跟踪
- ✅ 车辆历史运单查看
- ✅ 车辆维护记录管理
- ✅ 车辆证件到期提醒

**适用角色**：调度员、维护人员、管理员

---

### 3.5 行程管理模块 🗺️

**功能描述**：支持多运单挂载和联程运输

**核心能力**：
- ✅ 行程创建和管理
- ✅ 多运单挂载到同一行程
- ✅ 行程状态流转（已计划 → 进行中 → 已完成）
- ✅ 行程路线规划
- ✅ 行程资源占用管理（司机+车辆在行程期间不可被其他行程占用）
- ✅ 批量操作（行程中的运单可以批量推进状态）

**适用角色**：调度员、管理员

---

### 3.6 财务管理模块 💰

**功能描述**：应收应付和结算管理

**核心能力**：
- ✅ 财务记录查看（应收款、应付款）
- ✅ 自动生成财务记录（运单完成时自动生成）
- ✅ 客户结算单生成
- ✅ 司机薪酬单生成
- ✅ 财务数据统计和分析
- ✅ 财务报表导出

**适用角色**：财务人员、管理员

---

### 3.7 定价引擎模块 🎯

**功能描述**：基于规则引擎的动态计费系统

**核心能力**：
- ✅ 实时费用计算（根据货物信息、距离、规则自动计算）
- ✅ 计费规则配置（可视化规则编辑器）
- ✅ 计费规则追踪（查看每条规则的应用情况）
- ✅ 计费模板管理
- ✅ 支持复杂计费场景（危险品附加费、周末配送费、客户等级折扣等）

**适用角色**：管理员、运营人员

---

### 3.8 规则引擎模块 ⚙️

**功能描述**：可视化规则配置和管理

**核心能力**：
- ✅ 规则创建和编辑（可视化界面）
- ✅ 规则类型支持（计费规则、司机薪酬规则）
- ✅ 规则优先级管理
- ✅ 规则冲突检测
- ✅ 规则版本管理
- ✅ 规则执行追踪

**适用角色**：管理员

---

### 3.9 车队管理模块 🚚

**功能描述**：在途管理和资源监控

**核心能力**：
- ✅ 实时车队地图展示
- ✅ 车辆和司机位置跟踪
- ✅ 空闲资源查看
- ✅ 在途运单监控
- ✅ 历史轨迹回放

**适用角色**：调度员、管理员

---

### 3.10 移动端模块 📱

**功能描述**：司机移动端应用

**核心能力**：
- ✅ 司机登录和身份验证
- ✅ 任务列表查看（分配给司机的运单）
- ✅ 运单状态更新（提货、在途、送达）
- ✅ POD凭证上传（拍照上传）
- ✅ 实时位置上报

**适用角色**：司机

---

## 4. 已实现功能清单

### 4.1 核心业务流程 ✅

| 功能模块 | 功能点 | 实现状态 | 说明 |
|---------|--------|---------|------|
| **运单管理** | 运单创建 | ✅ 已完成 | 支持客户选择、地址自动填充、货物信息录入 |
| | 运单查询 | ✅ 已完成 | 支持多条件筛选和搜索 |
| | 运单详情 | ✅ 已完成 | 完整信息展示、时间线、POD凭证 |
| | 运单状态流转 | ✅ 已完成 | 完整状态机实现 |
| | 批量导入 | ✅ 已完成 | Excel模板导入 |
| | 运单打印 | ✅ 已完成 | BOL运单单打印和PDF导出 |
| **客户管理** | 客户档案 | ✅ 已完成 | 基本信息、联系方式、默认地址 |
| | 客户等级 | ✅ 已完成 | 标准、VIP、高级客户 |
| | 历史记录 | ✅ 已完成 | 历史运单和财务记录 |
| | 快速创建 | ✅ 已完成 | 从客户详情页快速创建运单 |
| | 搜索筛选 | ✅ 已完成 | 支持搜索、筛选和排序 |
| **司机管理** | 司机档案 | ✅ 已完成 | 基本信息、状态管理 |
| | 绩效跟踪 | ✅ 已完成 | 评分、完成率、准时率 |
| | 位置跟踪 | ✅ 已完成 | 实时位置上报和查看 |
| **车辆管理** | 车辆档案 | ✅ 已完成 | 基本信息、状态管理 |
| | 位置跟踪 | ✅ 已完成 | 实时位置上报和查看 |
| **行程管理** | 行程创建 | ✅ 已完成 | 支持多运单挂载 |
| | 状态流转 | ✅ 已完成 | 已计划 → 进行中 → 已完成 |
| | 批量操作 | ✅ 已完成 | 批量推进状态 |
| **财务管理** | 财务记录 | ✅ 已完成 | 应收应付记录查看 |
| | 自动生成 | ✅ 已完成 | 运单完成时自动生成 |
| | 结算单生成 | ✅ 已完成 | 客户和司机结算单 |
| | 财务统计 | ✅ 已完成 | 数据统计和分析 |
| **定价引擎** | 实时计算 | ✅ 已完成 | 根据规则自动计算费用 |
| | 规则配置 | ✅ 已完成 | 可视化规则编辑器 |
| | 规则追踪 | ✅ 已完成 | 查看规则应用情况 |
| **规则引擎** | 规则管理 | ✅ 已完成 | 创建、编辑、版本管理 |
| | 冲突检测 | ✅ 已完成 | 自动检测规则冲突 |
| **车队管理** | 地图展示 | ✅ 已完成 | 实时车队地图 |
| | 位置跟踪 | ✅ 已完成 | 车辆和司机位置 |
| | 轨迹回放 | ✅ 已完成 | 历史轨迹查看 |
| **移动端** | 司机登录 | ✅ 已完成 | 身份验证 |
| | 任务列表 | ✅ 已完成 | 运单列表查看 |
| | 状态更新 | ✅ 已完成 | 提货、在途、送达 |
| | POD上传 | ✅ 已完成 | 拍照上传凭证 |

### 4.2 技术功能 ✅

| 功能模块 | 功能点 | 实现状态 | 说明 |
|---------|--------|---------|------|
| **多租户** | 数据隔离 | ✅ 已完成 | 严格的租户数据隔离 |
| | 独立配置 | ✅ 已完成 | 每个租户独立配置 |
| **认证授权** | 用户登录 | ✅ 已完成 | JWT认证 |
| | 角色权限 | ✅ 已完成 | 管理员、运营、司机、客户等角色 |
| | 细粒度权限 | ✅ 已完成 | 功能级权限控制 |
| **API接口** | RESTful API | ✅ 已完成 | 完整的后端API |
| | API文档 | ✅ 已完成 | Swagger文档 |
| **数据管理** | 数据库设计 | ✅ 已完成 | PostgreSQL数据库 |
| | 数据迁移 | ✅ 已完成 | 数据库迁移脚本 |
| | 种子数据 | ✅ 已完成 | 测试数据填充 |

---

## 5. 产品主流程

### 5.1 运单全生命周期流程

```
┌─────────────────────────────────────────────────────────────────┐
│                    运单全生命周期流程图                          │
└─────────────────────────────────────────────────────────────────┘

1. 运单创建 (Created)
   │
   ├─ 方式1: 运营人员手工录入
   │   └─ 选择客户 → 填写地址 → 录入货物信息 → 提交
   │
   ├─ 方式2: 批量导入
   │   └─ 下载模板 → 填写Excel → 上传导入
   │
   └─ 方式3: 客户自助下单（未来）
       └─ 客户登录 → 创建运单 → 提交

2. 智能调度 (Scheduled/Assigned)
   │
   ├─ 自动调度（智能算法）
   │   ├─ 路线优化
   │   ├─ 车辆匹配
   │   └─ 司机分配
   │
   └─ 手动调度（调度员）
       ├─ 查看运单详情
       ├─ 选择司机和车辆
       └─ 直接指派或挂载到行程

3. 执行流转
   │
   ├─ 已提货 (Pickup In Progress)
   │   └─ 司机确认提货 → 上传提货凭证
   │
   ├─ 运输中 (In Transit)
   │   └─ 自动状态推进（基于位置）或手动更新
   │
   └─ 已送达 (Delivered)
       └─ 司机确认送达 → 上传POD凭证

4. 财务结算 (Completed)
   │
   ├─ 自动生成财务记录
   │   ├─ 应收款（客户）
   │   └─ 应付款（司机）
   │
   └─ 生成结算单
       ├─ 客户结算单
       └─ 司机薪酬单

5. 异常处理
   │
   ├─ 异常状态 (Exception)
   │   └─ 标记异常 → 人工处理 → 恢复或取消
   │
   └─ 取消运单 (Cancelled)
       └─ 任意非终态可取消
```

### 5.2 状态流转详细说明

| 状态 | 说明 | 进入条件 | 可执行操作 |
|------|------|----------|-----------|
| **draft** | 草稿 | 创建运单时选择 | 编辑、删除、提交确认 |
| **pending_confirmation** | 待确认 | 创建运单默认状态 | 确认、取消 |
| **confirmed** | 已确认/待调度 | 确认运单 | 分配司机、取消、标记异常 |
| **scheduled** | 已调度/待提货 | 分配司机后 | 司机提货、取消、标记异常 |
| **pickup_in_progress** | 已提货 | 司机确认提货 | 开始运输、标记异常 |
| **in_transit** | 运输途中 | 提货完成后 | 送达、标记异常 |
| **delivered** | 已送达，待结算 | 司机确认送达 | 完成结算、标记异常 |
| **pod_pending_review** | 已签收/待审核 | 上传POD后 | 审核通过、标记异常 |
| **completed** | 已完结 | 完成结算 | 终态，不可再变更 |
| **cancelled** | 已取消 | 任意非终态取消 | 终态 |
| **exception** | 异常中断 | 任意非终态标记异常 | 恢复或取消 |

### 5.3 智能调度流程

```
┌─────────────────────────────────────────────────────────────────┐
│                    智能调度优化流程                                │
└─────────────────────────────────────────────────────────────────┘

1. 运单创建触发
   │
   └─ 自动触发智能调度引擎

2. 路线规划
   │
   ├─ 获取取货地址和送货地址
   ├─ 调用Google Maps API计算距离和时间
   └─ 生成最优路线

3. 资源匹配
   │
   ├─ 查询可用司机（状态：空闲）
   ├─ 查询可用车辆（状态：可用）
   ├─ 匹配司机和车辆（考虑司机-车辆绑定）
   └─ 计算匹配度（距离、载重、时效）

4. 优化分配
   │
   ├─ 单运单分配：直接分配给最优司机和车辆
   └─ 多运单优化：考虑联程运输，降低空驶率

5. 分配结果
   │
   ├─ 成功分配：自动更新运单状态为"已调度"
   └─ 待分配：运单保持"已确认"状态，等待手动调度
```

### 5.4 财务结算流程

```
┌─────────────────────────────────────────────────────────────────┐
│                    财务自动结算流程                                │
└─────────────────────────────────────────────────────────────────┘

1. 运单完成触发
   │
   └─ 运单状态变为"completed"

2. 自动生成财务记录
   │
   ├─ 应收款（客户）
   │   ├─ 金额：运单最终费用
   │   ├─ 类型：receivable
   │   └─ 关联：运单ID
   │
   └─ 应付款（司机）
       ├─ 金额：司机薪酬（根据规则计算）
       ├─ 类型：payable
       └─ 关联：运单ID

3. 结算单生成
   │
   ├─ 客户结算单
   │   ├─ 选择客户
   │   ├─ 选择时间范围
   │   └─ 生成结算单（包含该时间段所有运单）
   │
   └─ 司机薪酬单
       ├─ 选择司机
       ├─ 选择时间范围
       └─ 生成薪酬单（包含该时间段所有运单）

4. 财务对账
   │
   ├─ 查看应收应付记录
   ├─ 导出对账报表
   └─ 标记收付款状态
```

---

## 6. 技术架构亮点

### 6.1 前端技术栈

- **React 18 + TypeScript**：现代化前端框架，类型安全
- **Ant Design**：企业级UI组件库，界面美观统一
- **Vite**：快速构建工具，开发体验优秀
- **React Router**：单页应用路由管理
- **Axios**：HTTP请求库，支持拦截器和错误处理

### 6.2 后端技术栈

- **Node.js + Express + TypeScript**：高性能后端服务
- **PostgreSQL**：关系型数据库，支持复杂查询
- **Redis**：缓存和消息队列
- **json-rules-engine**：规则引擎，支持动态业务规则
- **JWT**：无状态认证，支持多租户

### 6.3 核心架构特性

- ✅ **多租户SaaS架构**：一套系统支持多个物流公司，数据完全隔离
- ✅ **规则引擎驱动**：业务逻辑通过规则配置，无需修改代码
- ✅ **事件驱动**：基于事件的消息传递，支持异步处理
- ✅ **RESTful API**：标准化API接口，易于集成
- ✅ **微服务设计**：模块化架构，支持独立扩展

---

## 7. 未来功能规划

### 7.1 短期规划（3-6个月）

#### 7.1.1 客户自助服务增强
- [ ] **客户门户网站**
  - 客户注册和登录
  - 在线创建运单
  - 实时查询运单状态
  - 历史运单和费用查询
  - 在线支付（集成支付网关）

#### 7.1.2 移动端功能增强
- [ ] **司机移动端优化**
  - 导航集成（Google Maps导航）
  - 语音播报任务
  - 离线模式支持
  - 消息推送通知

- [ ] **客户移动端**
  - 移动端下单
  - 实时跟踪运单
  - 接收状态通知

#### 7.1.3 数据分析与报表
- [ ] **运营数据分析**
  - 运单量统计（日/周/月）
  - 收入统计和分析
  - 司机绩效分析
  - 车辆利用率分析

- [ ] **财务报表**
  - 利润表
  - 现金流量表
  - 客户对账报表
  - 司机薪酬报表

### 7.2 中期规划（6-12个月）

#### 7.2.1 智能优化算法
- [ ] **路线优化算法**
  - 多运单路线优化
  - 实时路况考虑
  - 成本最优路径计算

- [ ] **车辆调度优化**
  - 智能匹配算法优化
  - 预测性调度
  - 动态调整分配

#### 7.2.2 仓储管理（WMS）集成
- [ ] **仓库管理**
  - 仓库信息管理
  - 库存管理
  - 出入库管理

- [ ] **仓储与运输联动**
  - 出库自动创建运单
  - 入库确认运单完成

#### 7.2.3 客户关系管理（CRM）
- [ ] **客户管理增强**
  - 客户分级管理
  - 客户信用管理
  - 客户满意度调查

- [ ] **销售管理**
  - 销售机会管理
  - 报价管理
  - 合同管理

### 7.3 长期规划（12个月以上）

#### 7.3.1 商业智能（BI）
- [ ] **数据可视化**
  - 仪表板定制
  - 多维度数据分析
  - 数据钻取和切片

- [ ] **预测分析**
  - 需求预测
  - 成本预测
  - 风险预警

#### 7.3.2 国际化支持
- [ ] **多语言支持**
  - 中英文切换
  - 更多语言支持

- [ ] **多币种支持**
  - 多币种计费
  - 汇率自动转换

#### 7.3.3 生态集成
- [ ] **第三方系统集成**
  - ERP系统对接
  - 电商平台对接
  - 支付系统对接

- [ ] **API开放平台**
  - 开放API文档
  - 开发者门户
  - Webhook支持

---

## 8. 演示场景建议

### 8.1 核心流程演示（推荐时长：15-20分钟）

#### 场景1：完整运单流程（10分钟）
1. **创建运单**（2分钟）
   - 选择客户（展示客户管理）
   - 地址自动填充（展示智能填充）
   - 录入货物信息
   - 实时费用计算（展示定价引擎）

2. **智能调度**（3分钟）
   - 查看运单详情
   - 展示智能调度建议
   - 手动分配司机和车辆（或展示自动分配）

3. **执行流转**（3分钟）
   - 司机移动端接单（展示移动端）
   - 状态更新（提货 → 在途 → 送达）
   - POD上传（展示凭证管理）

4. **财务结算**（2分钟）
   - 运单完成
   - 自动生成财务记录（展示自动化）
   - 生成结算单（展示财务功能）

#### 场景2：规则引擎演示（5分钟）
1. 展示规则编辑器界面
2. 创建一条计费规则（如：危险品附加费）
3. 创建运单触发规则
4. 展示规则应用结果和追踪

#### 场景3：车队管理演示（5分钟）
1. 展示实时地图
2. 查看车辆和司机位置
3. 查看在途运单
4. 历史轨迹回放

### 8.2 功能亮点展示（推荐时长：10分钟）

1. **批量导入**（2分钟）
   - 下载模板
   - 填写Excel
   - 批量导入运单

2. **客户管理**（2分钟）
   - 客户搜索和筛选
   - 客户历史记录
   - 快速创建运单

3. **财务管理**（3分钟）
   - 财务记录查看
   - 结算单生成
   - 财务统计

4. **移动端**（3分钟）
   - 司机登录
   - 任务列表
   - 状态更新和POD上传

### 8.3 技术优势展示（推荐时长：5分钟）

1. **多租户架构**
   - 展示数据隔离
   - 展示独立配置

2. **规则引擎**
   - 展示规则配置灵活性
   - 展示无需代码修改即可调整业务规则

3. **API接口**
   - 展示API文档
   - 展示接口标准化

---

## 9. 常见问题（FAQ）

### Q1: 系统支持多少用户同时使用？
**A**: 系统采用多租户SaaS架构，理论上支持无限用户。实际性能取决于服务器配置和数据库性能。建议每个租户不超过1000个活跃用户。

### Q2: 数据安全性如何保障？
**A**: 
- 严格的租户数据隔离，每个租户的数据完全独立
- JWT认证和角色权限控制
- 数据传输采用HTTPS加密
- 数据库支持备份和恢复

### Q3: 系统是否支持定制开发？
**A**: 系统采用模块化设计，支持功能扩展。规则引擎允许通过配置实现业务逻辑调整，无需修改代码。如需深度定制，可以基于现有架构进行二次开发。

### Q4: 移动端支持哪些设备？
**A**: 目前支持iOS和Android系统。移动端采用响应式设计，适配各种屏幕尺寸。

### Q5: 系统如何收费？
**A**: 采用SaaS订阅模式，按租户数量和使用量计费。具体价格方案请联系销售团队。

### Q6: 系统部署方式？
**A**: 
- **云端部署**：推荐方式，我们提供托管服务
- **私有化部署**：支持部署到客户自有服务器
- **混合部署**：部分功能云端，部分功能本地

---

## 10. 联系方式

- **产品咨询**：product@tms-platform.com
- **技术支持**：support@tms-platform.com
- **销售联系**：sales@tms-platform.com
- **官方网站**：https://www.tms-platform.com
- **文档中心**：https://docs.tms-platform.com

---

## 附录：系统截图说明

> **注意**：在实际演示时，建议准备以下截图或录屏：
> 1. 系统登录界面
> 2. 运单创建界面（展示地址自动填充和费用计算）
> 3. 智能调度界面（展示司机和车辆匹配）
> 4. 实时地图界面（展示车队位置）
> 5. 规则编辑器界面（展示规则配置）
> 6. 财务结算界面（展示自动生成记录）
> 7. 移动端界面（展示司机操作）

---

**文档版本**: V1.0  
**最后更新**: 2025-11-24  
**维护团队**: TMS产品团队

