# TMS SaaS 平台生产环境配置模板
# 创建时间：2025-10-16 17:10:00
# 注意：此文件仅作为模板，实际密钥应存储在 Google Cloud Secret Manager 中

# ========================================
# 应用配置
# ========================================
NODE_ENV=production
PORT=8080
API_VERSION=v1

# ========================================
# 数据库配置（通过 Secret Manager 注入）
# ========================================
# DATABASE_URL 格式：postgresql://USER:PASSWORD@/DATABASE?host=/cloudsql/PROJECT_ID:REGION:INSTANCE_NAME&sslmode=disable
# 实际值从 Secret Manager 的 database-url 密钥获取
DATABASE_URL=postgresql://tms_user:REPLACE_PASSWORD@/tms_platform?host=/cloudsql/PROJECT_ID:asia-east1:tms-postgres&sslmode=disable

# ========================================
# JWT 配置（通过 Secret Manager 注入）
# ========================================
# 实际值从 Secret Manager 的 jwt-secret 密钥获取
JWT_SECRET=REPLACE_WITH_SECURE_RANDOM_STRING
JWT_EXPIRES_IN=7d
JWT_REFRESH_EXPIRES_IN=30d

# ========================================
# Google Maps API（通过 Secret Manager 注入）
# ========================================
# 实际值从 Secret Manager 的 google-maps-api-key 密钥获取
GOOGLE_MAPS_API_KEY=REPLACE_WITH_YOUR_API_KEY

# ========================================
# GEMINI API（通过 Secret Manager 注入）
# ========================================
# 实际值从 Secret Manager 的 gemini-api-key 密钥获取
GEMINI_API_KEY=REPLACE_WITH_YOUR_API_KEY

# ========================================
# Redis 配置
# ========================================
# 生产环境可以使用 Google Cloud Memorystore for Redis
REDIS_URL=redis://REDIS_HOST:6379
REDIS_HOST=REPLACE_WITH_MEMORYSTORE_IP
REDIS_PORT=6379
REDIS_PASSWORD=

# ========================================
# 文件上传配置
# ========================================
# 生产环境建议使用 Google Cloud Storage
UPLOAD_DIR=/tmp/uploads
MAX_FILE_SIZE=10485760
# Cloud Storage 配置
GCS_BUCKET_NAME=tms-uploads-REPLACE_PROJECT_ID
GCS_PROJECT_ID=REPLACE_PROJECT_ID

# ========================================
# 邮件配置
# ========================================
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=REPLACE_WITH_EMAIL
SMTP_PASS=REPLACE_WITH_APP_PASSWORD
SMTP_FROM=noreply@yourdomain.com

# ========================================
# 短信配置
# ========================================
SMS_PROVIDER=twilio
SMS_ACCOUNT_SID=REPLACE_WITH_TWILIO_SID
SMS_AUTH_TOKEN=REPLACE_WITH_TWILIO_TOKEN
SMS_FROM_NUMBER=+1234567890

# ========================================
# 日志配置
# ========================================
LOG_LEVEL=info
# Cloud Run 会自动收集 stdout/stderr 到 Cloud Logging
LOG_FILE=/tmp/app.log

# ========================================
# 监控配置
# ========================================
ENABLE_METRICS=true
METRICS_PORT=9090

# ========================================
# 安全配置
# ========================================
# CORS_ORIGIN 应该设置为前端的实际 URL
CORS_ORIGIN=https://tms-frontend-REPLACE_HASH.run.app
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# ========================================
# 第三方集成
# ========================================
WEATHER_API_KEY=REPLACE_IF_NEEDED

# ========================================
# 生产环境特定配置
# ========================================
ENABLE_SWAGGER=false
ENABLE_DEBUG=false

# ========================================
# Cloud Run 特定配置
# ========================================
# Cloud Run 会自动注入以下环境变量：
# - PORT: 服务监听端口
# - K_SERVICE: 服务名称
# - K_REVISION: 修订版本
# - K_CONFIGURATION: 配置名称

